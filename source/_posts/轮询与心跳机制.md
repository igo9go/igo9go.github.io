---
title: 轮询与心跳机制
date: 2016-11-03 09:04:23
tags: 架构
categories: 架构
---


在很多的平台应用中，都有这样的需求，平台内包括多个子系统或者属于其管控范围内的其他平台，需要对这些系统进行统一的监控，来查看当前的运行状态或者其他运行信息，我们的应用也有这样的一个情况，需要再外网服务端（平台）上监控，其下运行的多个内网服务端的网络状况，查阅了写资料后确立了2种可实现的方式。
简单的说就是服务端需要实时了解其下运行的客户端的情况。


1. 轮询机制
    
    >轮询：概括来说是服务端定时主动的去与要监控状态的客户端（或者叫其他系统）通信，询问当前的某种状态，客户端返回状态信息，客户端没有返回或返回错误、失效信息、则认为客户端已经宕机，然后服务端自己内部把这个客户端的状态保存下来（宕机或者其他），如果客户端正常，那么返回正常状态，如果客户端宕机或者返回的是定义的失效状态那么当前的客户端状态是能够及时的监控到的，如果客户端宕机之后重启了那么当服务端定时来轮询的时候，还是可以正常的获取返回信息，把其状态重新更新。
    
    
2. 心跳

    >心跳：最终得到的结果是与轮询一样的但是实现的方式有差别，心跳不是服务端主动去发信息检测客户端状态，而是在服务端保存下来所有客户端的状态信息，然后等待客户端定时来访问服务端，更新自己的当前状态，如果客户端超过指定的时间没有来更新状态，则认为客户端已经宕机或者其状态异常。


[心跳机制详解](http://blog.csdn.net/aspnet_lyc/article/details/37318861?utm_source=tuicool&utm_medium=referral)


